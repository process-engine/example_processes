<?xml version="1.0" encoding="UTF-8"?>
    <bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definition_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="1.8.0">
        <bpmn:collaboration id="Collaboration_1cidyxu">
            <bpmn:participant id="Participant_0px403d" name="Sending Mails" processRef="Sending Mails">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties />
                </bpmn:extensionElements>
            </bpmn:participant>
        </bpmn:collaboration>
        <bpmn:process id="Sending Mails" name="Sending Mails" isExecutable="false">
            <bpmn:laneSet>
                <bpmn:lane id="Lane_1xzf0d3" name="Lane">
                    <bpmn:extensionElements>
                        <camunda:executionListener class="" event="" />
                        <camunda:properties />
                        <camunda:properties />
                        <camunda:properties />
                    </bpmn:extensionElements>
                    <bpmn:flowNodeRef>
                        StartEvent_1
                    </bpmn:flowNodeRef>
                    <bpmn:flowNodeRef>
                        ServiceTask_FetchData
                    </bpmn:flowNodeRef>
                    <bpmn:flowNodeRef>
                        UserTask_GetEmailAddress
                    </bpmn:flowNodeRef>
                    <bpmn:flowNodeRef>
                        Task_1msdzuo
                    </bpmn:flowNodeRef>
                    <bpmn:flowNodeRef>
                        EndEvent_1snx2nr
                    </bpmn:flowNodeRef>
                    <bpmn:flowNodeRef>
                        ExclusiveGateway_0twg617
                    </bpmn:flowNodeRef>
                    <bpmn:flowNodeRef>
                        Task_0jrz6o9
                    </bpmn:flowNodeRef>
                </bpmn:lane>
            </bpmn:laneSet>
            <bpmn:startEvent id="StartEvent_1" name="Sending Mails">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties />
                    <camunda:properties />
                    <camunda:properties />
                    <camunda:properties />
                    <camunda:properties />
                    <camunda:properties />
                    <camunda:properties />
                    <camunda:properties />
                    <camunda:properties />
                    <camunda:properties />
                </bpmn:extensionElements>
                <bpmn:outgoing>
                    SequenceFlow_1ymq7uy
                </bpmn:outgoing>
            </bpmn:startEvent>
            <bpmn:sequenceFlow id="SequenceFlow_1ymq7uy" sourceRef="StartEvent_1" targetRef="ServiceTask_FetchData" />
            <bpmn:serviceTask id="ServiceTask_FetchData" name="Fetch Data">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties>
                        <camunda:property name="module" value="HttpService" />
                        <camunda:property name="method" value="get" />
                        <camunda:property name="params" value="[&#39;http://free.currencyconverterapi.com/api/v5/convert?q=EUR_USD&#38;compact=y&#39;]" />
                    </camunda:properties>
                </bpmn:extensionElements>
                <bpmn:incoming>
                    SequenceFlow_1ymq7uy
                </bpmn:incoming>
                <bpmn:outgoing>
                    SequenceFlow_1n2vmol
                </bpmn:outgoing>
            </bpmn:serviceTask>
            <bpmn:sequenceFlow id="SequenceFlow_1n2vmol" sourceRef="ServiceTask_FetchData" targetRef="UserTask_GetEmailAddress" />
            <bpmn:sequenceFlow id="SequenceFlow_16lwn40" name="" sourceRef="UserTask_GetEmailAddress" targetRef="Task_1msdzuo">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties>
                        <camunda:property name="mapper" value="{rates: token.history.ServiceTask_FetchData.result.EUR_USD, email: token.history.UserTask_GetEmailAddress.email}" />
                    </camunda:properties>
                </bpmn:extensionElements>
            </bpmn:sequenceFlow>
            <bpmn:userTask id="UserTask_GetEmailAddress" name="Get Email Address">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties>
                        <camunda:property name="uiName" value="Form" />
                    </camunda:properties>
                    <camunda:formData>
                        <camunda:formField id="email" label="Email adress:" type="string" defaultValue="" />
                    </camunda:formData>
                </bpmn:extensionElements>
                <bpmn:incoming>
                    SequenceFlow_1n2vmol
                </bpmn:incoming>
                <bpmn:outgoing>
                    SequenceFlow_16lwn40
                </bpmn:outgoing>
            </bpmn:userTask>
            <bpmn:userTask id="Task_1msdzuo" name="Confirm Data">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties>
                        <camunda:property name="uiName" value="Confirm" />
                        <camunda:property name="uiConfig" value="${ &#34;message&#34;: &#34;1 EUR = &#34; + token.current.rates.val + &#34; USD - email: &#34; + token.current.email, &#34;layout&#34;: [ { &#34;key&#34;: &#34;confirm&#34;, &#34;label&#34;: &#34;OK&#34;}, { &#34;key&#34;: &#34;cancel&#34;, &#34;label&#34;: &#34;cancel&#34;}] };" />
                    </camunda:properties>
                </bpmn:extensionElements>
                <bpmn:incoming>
                    SequenceFlow_16lwn40
                </bpmn:incoming>
                <bpmn:outgoing>
                    SequenceFlow_06tb3yf
                </bpmn:outgoing>
            </bpmn:userTask>
            <bpmn:endEvent id="EndEvent_1snx2nr" name="">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties />
                    <camunda:properties />
                </bpmn:extensionElements>
                <bpmn:incoming>
                    SequenceFlow_0jkz0lv
                </bpmn:incoming>
                <bpmn:incoming>
                    SequenceFlow_0ms96os
                </bpmn:incoming>
            </bpmn:endEvent>
            <bpmn:exclusiveGateway id="ExclusiveGateway_0twg617" name="">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties />
                </bpmn:extensionElements>
                <bpmn:incoming>
                    SequenceFlow_06tb3yf
                </bpmn:incoming>
                <bpmn:outgoing>
                    SequenceFlow_12l6f8f
                </bpmn:outgoing>
                <bpmn:outgoing>
                    SequenceFlow_0ms96os
                </bpmn:outgoing>
            </bpmn:exclusiveGateway>
            <bpmn:sequenceFlow id="SequenceFlow_06tb3yf" name="" sourceRef="Task_1msdzuo" targetRef="ExclusiveGateway_0twg617">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties />
                </bpmn:extensionElements>
                <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression" />
            </bpmn:sequenceFlow>
            <bpmn:sequenceFlow id="SequenceFlow_12l6f8f" name="ok" sourceRef="ExclusiveGateway_0twg617" targetRef="Task_0jrz6o9">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties />
                </bpmn:extensionElements>
                <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">
                    <![CDATA[token.current.key === 'confirm']]>
                </bpmn:conditionExpression>
            </bpmn:sequenceFlow>
            <bpmn:sequenceFlow id="SequenceFlow_0jkz0lv" sourceRef="Task_0jrz6o9" targetRef="EndEvent_1snx2nr" />
            <bpmn:sequenceFlow id="SequenceFlow_0ms96os" name="cancel" sourceRef="ExclusiveGateway_0twg617" targetRef="EndEvent_1snx2nr">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties />
                </bpmn:extensionElements>
                <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">
                    <![CDATA[token.current.key === 'cancel']]>
                </bpmn:conditionExpression>
            </bpmn:sequenceFlow>
            <bpmn:serviceTask id="Task_0jrz6o9" name="Send Mail">
                <bpmn:extensionElements>
                    <camunda:executionListener class="" event="" />
                    <camunda:properties>
                        <camunda:property name="module" value="MailService" />
                        <camunda:property name="method" value="send" />
                        <camunda:property name="params" value="[null, token.history.UserTask_GetEmailAddress.email, &#34;EUR to USD conversion rate&#34;, &#34;1 EUR = &#34; + token.history.ServiceTask_FetchData.result.EUR_USD.val + &#34; USD&#34;]" />
                    </camunda:properties>
                </bpmn:extensionElements>
                <bpmn:incoming>
                    SequenceFlow_12l6f8f
                </bpmn:incoming>
                <bpmn:outgoing>
                    SequenceFlow_0jkz0lv
                </bpmn:outgoing>
            </bpmn:serviceTask>
        </bpmn:process>
        <bpmndi:BPMNDiagram id="BPMNDiagram_1">
            <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_1cidyxu">
                <bpmndi:BPMNShape id="Participant_0px403d_di" bpmnElement="Participant_0px403d">
                    <dc:Bounds x="5" y="4" width="964" height="251" />
                </bpmndi:BPMNShape>
                <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
                    <dc:Bounds x="101" y="65" width="36" height="36" />
                    <bpmndi:BPMNLabel>
                        <dc:Bounds x="85" y="101" width="70" height="13" />
                    </bpmndi:BPMNLabel>
                </bpmndi:BPMNShape>
                <bpmndi:BPMNShape id="Lane_1xzf0d3_di" bpmnElement="Lane_1xzf0d3">
                    <dc:Bounds x="35" y="4" width="934" height="251" />
                </bpmndi:BPMNShape>
                <bpmndi:BPMNEdge id="SequenceFlow_1ymq7uy_di" bpmnElement="SequenceFlow_1ymq7uy">
                    <di:waypoint x="137" y="83" />
                    <di:waypoint x="182" y="83" />
                    <bpmndi:BPMNLabel>
                        <dc:Bounds x="159.5" y="61.5" width="0" height="13" />
                    </bpmndi:BPMNLabel>
                </bpmndi:BPMNEdge>
                <bpmndi:BPMNShape id="ServiceTask_0qqfijr_di" bpmnElement="ServiceTask_FetchData">
                    <dc:Bounds x="182" y="43" width="100" height="80" />
                </bpmndi:BPMNShape>
                <bpmndi:BPMNShape id="UserTask_0arkqb5_di" bpmnElement="Task_1msdzuo">
                    <dc:Bounds x="491" y="43" width="100" height="80" />
                </bpmndi:BPMNShape>
                <bpmndi:BPMNShape id="EndEvent_1snx2nr_di" bpmnElement="EndEvent_1snx2nr">
                    <dc:Bounds x="881" y="65" width="36" height="36" />
                    <bpmndi:BPMNLabel>
                        <dc:Bounds x="854" y="104" width="90" height="13" />
                    </bpmndi:BPMNLabel>
                </bpmndi:BPMNShape>
                <bpmndi:BPMNEdge id="SequenceFlow_1n2vmol_di" bpmnElement="SequenceFlow_1n2vmol">
                    <di:waypoint x="282" y="83" />
                    <di:waypoint x="334" y="83" />
                    <bpmndi:BPMNLabel>
                        <dc:Bounds x="308" y="61.5" width="0" height="13" />
                    </bpmndi:BPMNLabel>
                </bpmndi:BPMNEdge>
                <bpmndi:BPMNEdge id="SequenceFlow_16lwn40_di" bpmnElement="SequenceFlow_16lwn40">
                    <di:waypoint x="434" y="83" />
                    <di:waypoint x="491" y="83" />
                    <bpmndi:BPMNLabel>
                        <dc:Bounds x="462.5" y="61.5" width="0" height="13" />
                    </bpmndi:BPMNLabel>
                </bpmndi:BPMNEdge>
                <bpmndi:BPMNShape id="UserTask_183qjnn_di" bpmnElement="UserTask_GetEmailAddress">
                    <dc:Bounds x="334" y="43" width="100" height="80" />
                </bpmndi:BPMNShape>
                <bpmndi:BPMNShape id="ExclusiveGateway_0twg617_di" bpmnElement="ExclusiveGateway_0twg617" isMarkerVisible="true">
                    <dc:Bounds x="645" y="58" width="50" height="50" />
                    <bpmndi:BPMNLabel>
                        <dc:Bounds x="670" y="111" width="0" height="13" />
                    </bpmndi:BPMNLabel>
                </bpmndi:BPMNShape>
                <bpmndi:BPMNEdge id="SequenceFlow_06tb3yf_di" bpmnElement="SequenceFlow_06tb3yf">
                    <di:waypoint x="591" y="83" />
                    <di:waypoint x="645" y="83" />
                    <bpmndi:BPMNLabel>
                        <dc:Bounds x="618" y="61" width="0" height="13" />
                    </bpmndi:BPMNLabel>
                </bpmndi:BPMNEdge>
                <bpmndi:BPMNEdge id="SequenceFlow_12l6f8f_di" bpmnElement="SequenceFlow_12l6f8f">
                    <di:waypoint x="670" y="108" />
                    <di:waypoint x="670" y="195" />
                    <di:waypoint x="739" y="195" />
                    <bpmndi:BPMNLabel>
                        <dc:Bounds x="679" y="145" width="12" height="12" />
                    </bpmndi:BPMNLabel>
                </bpmndi:BPMNEdge>
                <bpmndi:BPMNEdge id="SequenceFlow_0jkz0lv_di" bpmnElement="SequenceFlow_0jkz0lv">
                    <di:waypoint x="839" y="195" />
                    <di:waypoint x="899" y="195" />
                    <di:waypoint x="899" y="101" />
                    <bpmndi:BPMNLabel>
                        <dc:Bounds x="869" y="173.5" width="0" height="13" />
                    </bpmndi:BPMNLabel>
                </bpmndi:BPMNEdge>
                <bpmndi:BPMNEdge id="SequenceFlow_0ms96os_di" bpmnElement="SequenceFlow_0ms96os">
                    <di:waypoint x="695" y="83" />
                    <di:waypoint x="881" y="83" />
                    <bpmndi:BPMNLabel>
                        <dc:Bounds x="772" y="62" width="32" height="12" />
                    </bpmndi:BPMNLabel>
                </bpmndi:BPMNEdge>
                <bpmndi:BPMNShape id="ServiceTask_1yes1t1_di" bpmnElement="Task_0jrz6o9">
                    <dc:Bounds x="739" y="155" width="100" height="80" />
                </bpmndi:BPMNShape>
            </bpmndi:BPMNPlane>
        </bpmndi:BPMNDiagram>
    </bpmn:definitions>